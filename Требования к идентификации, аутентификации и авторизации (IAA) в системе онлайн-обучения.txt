Границы и акторы:

Акторы: Гость (неавторизованный пользователь), Студент, Преподаватель, Администратор, Сервис уведомлений (email/SMS/Push), Внешний IdP (Google/Microsoft/Apple), Бэкенд IAA, БД пользователей, Клиентские приложения (Web, iOS/Android).

Охват: регистрация/вход, восстановление доступа, управление сессией, проверка прав (RBAC), выход, аудит.

Функциональные требования.
Идентификация:

F-ID-01 Ввод идентификатора: email или номер телефона; альтернативно — выбор провайдера SSO (Google/Microsoft/Apple).

F-ID-02 Валидация формата идентификатора на клиенте и сервере.

F-ID-03 Наличие экрана выбора роли при регистрации (Студент/Преподаватель); роль по умолчанию — Студент.

Регистрация:

F-REG-01 Регистрация по email/телефону: ввод пароля и подтверждение контакта.

F-REG-02 Регистрация через SSO: создание связанной локальной учётной записи; запрос недостающих полей (имя, согласия).

F-REG-03 Подтверждение согласий (оферта, политика конфиденциальности); логирование согласий с фиксацией времени/версии документа.

Аутентификация:

F-AUTH-01 Вход по парольной паре + опциональная MFA (TOTP/SMS/email-код).

F-AUTH-02 Passwordless опция (магическая ссылка/email-код) — настраиваемая фича-флагом.

F-AUTH-03 Ограничение попыток входа; капча после N неудач.

F-AUTH-04 Привязка и управление факторами MFA в личном кабинете (подтверждение при добавлении/удалении фактора).

F-AUTH-05 Выход: локальный (текущая сессия) и глобальный (все устройства).

Восстановление доступа:

F-REC-01 Сброс пароля по подтверждённому email/телефону (одноразовая ссылка/код, TTL).

F-REC-02 Если включена MFA — повторная проверка второго фактора при сбросе.

Сессии:

F-SESS-01 Список активных сеансов в кабинете с возможностью завершения каждого.

Авторизация (доступ к ресурсам):

F-AZ-01 Модель RBAC как минимум с ролями: student, teacher, admin (расширяемо).

F-AZ-02 Проверка прав на уровне API-эндпоинтов и на уровне UI-контролов (скрытие/деактивация).

F-AZ-03 Гранулярные разрешения: просмотр курсов, редактирование курса, управление группами, модерация и пр.

F-AZ-04 Делегирование прав: преподаватель может назначать помощника в рамках курса (ограниченная область).

Локализация и доступность:

F-LOC-01 Интерфейсы входа/восстановления доступны минимум на RU/EN (расширяемо).

F-ACC-01 Поддержка фокуса клавиатурой.

Нефункциональные требования.
Безопасность:

NFR-SEC-01 Хранение паролей: Хранение в зашифрованном виде (bcrypt/Argon2), проверка сложности.

NFR-SEC-02 Политика пароля: мин. 10 символов, классы символов — обязательно.

NFR-SEC-03 MFA: Обязательная для администраторов; опциональная для пользователей.

NFR-SEC-04 Защита от брутфорса: защита от брутфорса (например, капча или временная блокировка после N неудачных попыток).

NFR-SEC-05 Сессии: управление через безопасные серверные куки (HttpOnly, Secure).

NFR-SEC-06 Шифрование данных в транзите: HTTPS/TLS для всех взаимодействий.

Производительность:

NFR-PERF-01 Время ответа на вход/регистрацию ≤ 2 сек.

Надёжность и доступность:

NFR-REL-01 Доступность сервиса ≥ 99% в месяц.

Юзабилити и доступность:

NFR-UX-01 Чёткие сообщения об ошибках без раскрытия, какой параметр неверный (избегать «email не найден»).

NFR-UX-03 Поддержка автозаполнения менеджерами паролей; корректные autocomplete атрибуты.
